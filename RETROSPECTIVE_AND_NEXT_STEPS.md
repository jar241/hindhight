# 차트 개발 프로젝트 회고 및 다음 단계 가이드

## 1. 회고: 이번 작업에서 겪은 문제와 복잡해진 이유

### 주요 이슈 및 원인
- **데이터/스타일/로직이 뒤섞여 점진적으로 복잡해짐**
  - 차트, KPI 카드, 거래내역, API 연동, 스타일 등 다양한 요구사항이 순차적으로 추가되면서 코드가 점점 복잡해졌음
- **Chart.js의 한계와 예외 처리**
  - order, datasets 순서, borderWidth 등 Chart.js의 기본 옵션만으로는 원하는 z-순서(포인트가 라인 위에 오도록)를 완벽히 구현할 수 없었음
  - 결국 afterDraw 커스텀 플러그인으로 직접 포인트를 그려야 했음
- **상태/데이터 흐름의 일관성 부족**
  - KPI 카드와 차트, 거래내역 등에서 데이터 소스(전체/필터링/실데이터/더미데이터)가 혼재되어 일관성 유지가 어려웠음
- **스타일 변수/클래스/디자인 시스템 동기화 미흡**
  - 색상, 폰트, spacing 등 디자인 시스템과 코드의 동기화가 누락되어 중복/혼란이 발생

### 복잡해진 이유
- 요구사항이 점진적으로 추가/변경되면서 기존 구조를 계속 수정/덧붙이게 됨
- Chart.js의 기본 기능 한계로 인해 예외적 코드(커스텀 플러그인 등)가 추가됨
- 데이터 흐름(전체/필터/실데이터/더미데이터)이 명확히 분리되지 않음

---

## 2. 다음 유사 작업 시 추천 워크플로우/명령/구조

### (1) 요구사항/기능 우선순위 정리
- "내가 만들고 싶은 차트/대시보드의 핵심 기능은 무엇인가?"
  - 예: 실데이터/더미데이터 전환, 거래내역 오버레이, KPI 카드, Figma 스타일 반영 등
- **핵심 기능부터 단계별로 구현** (예: ① 차트 기본, ② KPI 카드, ③ 거래내역, ④ 스타일, ⑤ API 연동)

### (2) 데이터 구조/흐름 설계 먼저!
- 전체 데이터 vs. 필터링 데이터 vs. 거래내역 등 **데이터 소스와 흐름을 명확히 분리**
- 각 컴포넌트가 어떤 데이터를 언제/어떻게 받아야 하는지 설계
- 예: KPI 카드(전체 데이터 기준), 차트(필터링 데이터 기준), 거래내역(항상 전체)

### (3) 디자인 시스템/스타일 변수 먼저 정리
- 색상, 폰트, spacing 등 **디자인 시스템 토큰을 먼저 코드에 반영**
- CSS 변수와 Figma/디자인 시스템을 동기화

### (4) Chart.js 등 라이브러리의 한계/특성 미리 파악
- order, datasets, afterDraw 등 **z-순서/커스텀 플러그인 필요 여부를 미리 조사**
- 공식 문서/이슈/예제 참고

### (5) 기능별로 작은 단위로 테스트/적용
- 차트 기본 → 거래내역 오버레이 → 스타일 → 툴팁 → API 연동 등 **작은 단위로 점진적 개발/테스트**
- 각 단계별로 "내가 원하는 동작이 맞는지" 확인 후 다음 단계로

### (6) 명확한 명령/질문 예시 (AI/개발자에게)
- "차트에서 거래내역 포인트가 항상 라인 위에 오도록 Chart.js에서 가장 확실한 방법을 알려줘"
- "KPI 카드의 변화율 색상 로직이 차트와 일치하도록 구조를 설계해줘"
- "전체 데이터와 기간 필터 데이터의 흐름을 명확히 분리해서 코드 구조를 잡아줘"
- "디자인 시스템 토큰과 CSS 변수를 동기화하는 방법을 알려줘"

---

## 3. 클린 코드/구조를 위한 팁

- **데이터 흐름을 명확히 분리** (전체/필터/거래내역 등)
- **스타일 변수/디자인 시스템을 코드에 먼저 반영**
- **라이브러리 한계/예외(예: afterDraw 커스텀 플러그인) 미리 파악**
- **컴포넌트별 역할/관심사 분리** (KPI 카드, 차트, 거래내역 등)
- **작은 단위로 점진적 개발/테스트**
- **명확한 주석/문서화** (특히 예외적 코드, 커스텀 플러그인 등)

---

## 결론
- 처음부터 데이터 구조/흐름, 디자인 시스템, 라이브러리 한계 등을 미리 설계/조사하고, 핵심 기능부터 단계별로 개발/테스트하는 것이 복잡도를 줄이고 클린 코드를 만드는 최적의 방법입니다.
- AI/개발자에게도 "내가 원하는 동작/구조/우선순위"를 명확히 설명/질문하는 것이 중요합니다. 